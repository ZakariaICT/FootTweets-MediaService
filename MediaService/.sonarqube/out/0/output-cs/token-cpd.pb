⁄"
nC:\Users\ZAHas\source\repos\Semester 6 GIT\FootTweets-MediaService\mediaservice\Controllers\MediaController.cs
	namespace 	
MediaService
 
. 
Controllers "
{		 
[

 
Route

 

(


 
$str

 
)

 
]

 
[ 
ApiController 
] 
public 

class 
MediaController  
:! "
ControllerBase# 1
{ 
private 

IMediaRepo 
_repository &
;& '
private 
IMapper 
_mapper 
;  
public 
MediaController 
( 

IMediaRepo )

repository* 4
,4 5
IMapper6 =
mapper> D
)D E
{ 	
_mapper 
= 
mapper 
; 
_repository 
= 

repository $
;$ %
} 	
[ 	
HttpGet	 
( 
$str 
) 
] 
public 
ActionResult 
< 
IEnumerable '
<' (
PictureReadDTO( 6
>6 7
>7 8
GetPictures9 D
(D E
)E F
{ 	
Console 
. 
	WriteLine 
( 
$str 7
)7 8
;8 9
var 
pictureItems 
= 
_repository *
.* +
GetAllPictures+ 9
(9 :
): ;
;; <
return 
Ok 
( 
_mapper 
. 
Map !
<! "
IEnumerable" -
<- .
PictureReadDTO. <
>< =
>= >
(> ?
pictureItems? K
)K L
)L M
;M N
} 	
["" 	
HttpGet""	 
("" 
$str"" 
,"" 
Name"" 
="" 
$str""  0
)""0 1
]""1 2
public## 
ActionResult## 
<## 
PictureReadDTO## *
>##* +
GetPictureByID##, :
(##: ;
int##; >
id##? A
)##A B
{$$ 	
var%% 
pictureItem%% 
=%% 
_repository%% )
.%%) *
GetPictureByID%%* 8
(%%8 9
id%%9 ;
)%%; <
;%%< =
if&& 
(&& 
pictureItem&& 
!=&& 
null&& #
)&&# $
{'' 
return(( 
Ok(( 
((( 
_mapper(( !
.((! "
Map((" %
<((% &
PictureReadDTO((& 4
>((4 5
(((5 6
pictureItem((6 A
)((A B
)((B C
;((C D
})) 
return++ 
NotFound++ 
(++ 
)++ 
;++ 
},, 	
[.. 	
HttpPost..	 
(.. 
$str.. 
).. 
].. 
public// 
ActionResult// 
<// 
PictureReadDTO// *
>//* +
CreatePicture//, 9
(//9 :
PicturesDTO//: E
pictures//F N
)//N O
{00 	
var11 
pictureModel11 
=11 
_mapper11 %
.11% &
Map11& )
<11) *
Pictures11* 2
>112 3
(113 4
pictures114 <
)11< =
;11= >
_repository22 
.22 
CreatePicture22 %
(22% &
pictureModel22& 2
)222 3
;223 4
_repository33 
.33 
saveChanges33 #
(33# $
)33$ %
;33% &
var55 

pictureDTO55 
=55 
_mapper55 $
.55$ %
Map55% (
<55( )
PictureReadDTO55) 7
>557 8
(558 9
pictureModel559 E
)55E F
;55F G
return77 
CreatedAtRoute77 !
(77! "
nameof77" (
(77( )
GetPictureByID77) 7
)777 8
,778 9
new77: =
{77> ?
Id77@ B
=77C D

pictureDTO77E O
.77O P
Id77P R
}77S T
,77T U

pictureDTO77V `
)77` a
;77a b
}88 	
}99 
}:: ¨
xC:\Users\ZAHas\source\repos\Semester 6 GIT\FootTweets-MediaService\mediaservice\Controllers\WeatherForecastController.cs
	namespace 	
MediaService
 
. 
Controllers "
{ 
[ 
ApiController 
] 
[ 
Route 

(
 
$str 
) 
] 
public 

class %
WeatherForecastController *
:+ ,
ControllerBase- ;
{ 
private		 
static		 
readonly		 
string		  &
[		& '
]		' (
	Summaries		) 2
=		3 4
new		5 8
[		8 9
]		9 :
{

 	
$str 
, 
$str 
, 
$str '
,' (
$str) /
,/ 0
$str1 7
,7 8
$str9 ?
,? @
$strA H
,H I
$strJ O
,O P
$strQ ]
,] ^
$str_ j
} 
; 
private 
readonly 
ILogger  
<  !%
WeatherForecastController! :
>: ;
_logger< C
;C D
public %
WeatherForecastController (
(( )
ILogger) 0
<0 1%
WeatherForecastController1 J
>J K
loggerL R
)R S
{ 	
_logger 
= 
logger 
; 
} 	
[ 	
HttpGet	 
( 
Name 
= 
$str ,
), -
]- .
public 
IEnumerable 
< 
WeatherForecast *
>* +
Get, /
(/ 0
)0 1
{ 	
return 

Enumerable 
. 
Range #
(# $
$num$ %
,% &
$num' (
)( )
.) *
Select* 0
(0 1
index1 6
=>7 9
new: =
WeatherForecast> M
{ 
Date 
= 
DateTime 
.  
Now  #
.# $
AddDays$ +
(+ ,
index, 1
)1 2
,2 3
TemperatureC 
= 
Random %
.% &
Shared& ,
., -
Next- 1
(1 2
-2 3
$num3 5
,5 6
$num7 9
)9 :
,: ;
Summary 
= 
	Summaries #
[# $
Random$ *
.* +
Shared+ 1
.1 2
Next2 6
(6 7
	Summaries7 @
.@ A
LengthA G
)G H
]H I
} 
) 
. 
ToArray 
( 
) 
; 
} 	
}   
}!! ¸
dC:\Users\ZAHas\source\repos\Semester 6 GIT\FootTweets-MediaService\mediaservice\Data\AppDbContext.cs
	namespace 	
MediaService
 
. 
Data 
{ 
public 

class 
AppDbContext 
: 
	DbContext  )
{ 
public		 
DbSet		 
<		 
Pictures		 
>		 
pictures		 '
{		( )
get		* -
;		- .
set		/ 2
;		2 3
}		4 5
	protected 
override 
void 
OnConfiguring  -
(- .#
DbContextOptionsBuilder. E
optionsBuilderF T
)T U
{ 	
optionsBuilder 
. 
	UseNpgsql $
($ %
$str% {
){ |
;| }
} 	
} 
} ˘
eC:\Users\ZAHas\source\repos\Semester 6 GIT\FootTweets-MediaService\mediaservice\DTO\PictureReadDTO.cs
	namespace 	
MediaService
 
. 
DTO 
{ 
public 

class 
PictureReadDTO 
{ 
[ 	
Key	 
] 
[ 	
Required	 
] 
public		 
int		 
Id		 
{		 
get		 
;		 
set		  
;		  !
}		" #
[ 	
Required	 
] 
public 
string 

PictureURL  
{! "
get# &
;& '
set( +
;+ ,
}- .
} 
} ˝
bC:\Users\ZAHas\source\repos\Semester 6 GIT\FootTweets-MediaService\mediaservice\DTO\PicturesDTO.cs
	namespace 	
MediaService
 
. 
DTO 
{ 
public 

class 
PicturesDTO 
{ 
[ 	
Required	 
] 
public		 
string		 

PictureURL		  
{		! "
get		# &
;		& '
set		( +
;		+ ,
}		- .
}

 
} Å
eC:\Users\ZAHas\source\repos\Semester 6 GIT\FootTweets-MediaService\mediaservice\Mapper\MediaMapper.cs
	namespace 	
MediaService
 
. 
Mapper 
{ 
public 

class 
MediaMapper 
: 
Profile &
{ 
public		 
MediaMapper		 
(		 
)		 
{

 	
	CreateMap 
< 
Pictures 
, 
PictureReadDTO  .
>. /
(/ 0
)0 1
;1 2
	CreateMap 
< 
PicturesDTO !
,! "
Pictures# +
>+ ,
(, -
)- .
;. /
} 	
} 
} –
}C:\Users\ZAHas\source\repos\Semester 6 GIT\FootTweets-MediaService\mediaservice\Migrations\20231217141744_UpdatedMigration.cs
	namespace 	
MediaService
 
. 

Migrations !
{ 
public		 

partial		 
class		 
UpdatedMigration		 )
:		* +
	Migration		, 5
{

 
	protected 
override 
void 
Up  "
(" #
MigrationBuilder# 3
migrationBuilder4 D
)D E
{ 	
migrationBuilder 
. 
CreateTable (
(( )
name 
: 
$str  
,  !
columns 
: 
table 
=> !
new" %
{ 
Id 
= 
table 
. 
Column %
<% &
int& )
>) *
(* +
type+ /
:/ 0
$str1 :
,: ;
nullable< D
:D E
falseF K
)K L
. 

Annotation #
(# $
$str$ D
,D E)
NpgsqlValueGenerationStrategyF c
.c d#
IdentityByDefaultColumnd {
){ |
,| }

PictureURL 
=  
table! &
.& '
Column' -
<- .
string. 4
>4 5
(5 6
type6 :
:: ;
$str< B
,B C
nullableD L
:L M
falseN S
)S T
} 
, 
constraints 
: 
table "
=># %
{ 
table 
. 

PrimaryKey $
($ %
$str% 2
,2 3
x4 5
=>6 8
x9 :
.: ;
Id; =
)= >
;> ?
} 
) 
; 
} 	
	protected 
override 
void 
Down  $
($ %
MigrationBuilder% 5
migrationBuilder6 F
)F G
{ 	
migrationBuilder 
. 
	DropTable &
(& '
name   
:   
$str    
)    !
;  ! "
}!! 	
}"" 
}## Ò
aC:\Users\ZAHas\source\repos\Semester 6 GIT\FootTweets-MediaService\mediaservice\Model\Pictures.cs
	namespace 	
MediaService
 
. 
Model 
{ 
public 

class 
Pictures 
{ 
[ 	
Key	 
] 
[ 	
Required	 
] 
public		 
int		 
Id		 
{		 
get		 
;		 
set		  
;		  !
}		" #
[ 	
Required	 
] 
public 
string 

PictureURL  
{! "
get# &
;& '
set( +
;+ ,
}- .
} 
} Û
ZC:\Users\ZAHas\source\repos\Semester 6 GIT\FootTweets-MediaService\mediaservice\Program.cs
var 
builder 
= 
WebApplication 
. 
CreateBuilder *
(* +
args+ /
)/ 0
;0 1
builder 
. 
Services 
. 
AddControllers 
(  
)  !
;! "
builder 
. 
Configuration 
. 
AddJsonFile !
(! "
$str" 4
,4 5
optional6 >
:> ?
false@ E
,E F
reloadOnChangeG U
:U V
trueW [
)[ \
;\ ]
var 
configuration 
= 
builder 
. 
Configuration )
;) *
builder 
. 
Services 
. 
AddDbContext 
< 
AppDbContext *
>* +
(+ ,
), -
;- .
builder 
. 
Services 
. 
AddSwaggerGen 
( 
c  
=>! #
{ 
c 
. 

SwaggerDoc 
( 
$str 
, 
new 
OpenApiInfo &
{' (
Title) .
=/ 0
$str1 <
,< =
Version> E
=F G
$strH L
}M N
)N O
;O P
} 
) 
; 
builder 
. 
Services 
. 
	AddScoped 
< 

IMediaRepo %
,% &
	MediaRepo' 0
>0 1
(1 2
)2 3
;3 4
builder 
. 
Services 
. 
AddAutoMapper 
( 
	AppDomain (
.( )
CurrentDomain) 6
.6 7
GetAssemblies7 D
(D E
)E F
)F G
;G H
builder 
. 
Services 
. #
AddEndpointsApiExplorer (
(( )
)) *
;* +
builder 
. 
Services 
. 
AddSwaggerGen 
( 
)  
;  !
var 
app 
= 	
builder
 
. 
Build 
( 
) 
; 
using 
( 
var 

scope 
= 
app 
. 
Services 
.  
CreateScope  +
(+ ,
), -
)- .
{   
using!! 	
var!!
 
context!! 
=!! 
scope!! 
.!! 
ServiceProvider!! -
.!!- .
GetRequiredService!!. @
<!!@ A
AppDbContext!!A M
>!!M N
(!!N O
)!!O P
;!!P Q
context"" 
."" 
Database"" 
."" 
EnsureCreated"" "
(""" #
)""# $
;""$ %
}## 
app'' 
.'' 

UseSwagger'' 
('' 
)'' 
;'' 
app(( 
.(( 
UseSwaggerUI(( 
((( 
)(( 
;(( 
app,, 
.,, 
UseHttpsRedirection,, 
(,, 
),, 
;,, 
app-- 
.-- 
UseAuthorization-- 
(-- 
)-- 
;-- 
app.. 
... 
MapControllers.. 
(.. 
).. 
;.. 
app// 
.// 
Run// 
(// 
)// 	
;//	 
Ø
jC:\Users\ZAHas\source\repos\Semester 6 GIT\FootTweets-MediaService\mediaservice\Repositories\IMediaRepo.cs
	namespace 	
MediaService
 
. 
Repositories #
{ 
public 

	interface 

IMediaRepo 
{ 
bool 
saveChanges 
( 
) 
; 
IEnumerable		 
<		 
Pictures		 
>		 
GetAllPictures		 ,
(		, -
)		- .
;		. /
Pictures

 
GetPictureByID

 
(

  
int

  #
id

$ &
)

& '
;

' (
void 
CreatePicture 
( 
Pictures #
plat$ (
)( )
;) *
} 
} È
iC:\Users\ZAHas\source\repos\Semester 6 GIT\FootTweets-MediaService\mediaservice\Repositories\MediaRepo.cs
	namespace 	
MediaService
 
. 
Repositories #
{ 
public 

class 
	MediaRepo 
: 

IMediaRepo '
{ 
private 
readonly 
AppDbContext %
_context& .
;. /
public

 
	MediaRepo

 
(

 
AppDbContext

 %
context

& -
)

- .
{ 	
_context 
= 
context 
; 
} 	
public 
void 
CreatePicture !
(! "
Pictures" *
plat+ /
)/ 0
{ 	
if 
( 
plat 
== 
null 
) 
{ 
throw 
new !
ArgumentNullException /
(/ 0
nameof0 6
(6 7
plat7 ;
); <
)< =
;= >
} 
_context 
. 
pictures 
. 
Add !
(! "
plat" &
)& '
;' (
} 	
public 
IEnumerable 
< 
Pictures #
># $
GetAllPictures% 3
(3 4
)4 5
{ 	
return 
_context 
. 
pictures $
.$ %
ToList% +
(+ ,
), -
;- .
} 	
public 
Pictures 
GetPictureByID &
(& '
int' *
id+ -
)- .
{ 	
return   
_context   
.   
pictures   $
.  $ %
FirstOrDefault  % 3
(  3 4
p  4 5
=>  6 8
p  9 :
.  : ;
Id  ; =
==  > @
id  A C
)  C D
;  D E
}!! 	
public## 
bool## 
saveChanges## 
(##  
)##  !
{$$ 	
return%% 
(%% 
_context%% 
.%% 
SaveChanges%% (
(%%( )
)%%) *
>=%%+ -
$num%%. /
)%%/ 0
;%%0 1
}&& 	
}'' 
}(( ˜
bC:\Users\ZAHas\source\repos\Semester 6 GIT\FootTweets-MediaService\mediaservice\WeatherForecast.cs
	namespace 	
MediaService
 
{ 
public 

class 
WeatherForecast  
{ 
public 
DateTime 
Date 
{ 
get "
;" #
set$ '
;' (
}) *
public 
int 
TemperatureC 
{  !
get" %
;% &
set' *
;* +
}, -
public		 
int		 
TemperatureF		 
=>		  "
$num		# %
+		& '
(		( )
int		) ,
)		, -
(		- .
TemperatureC		. :
/		; <
$num		= C
)		C D
;		D E
public 
string 
? 
Summary 
{  
get! $
;$ %
set& )
;) *
}+ ,
} 
} 